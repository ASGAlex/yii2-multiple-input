!function(t){t.fn.multipleInput=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.multipleInput"),!1):n.init.apply(this,arguments)};var e={id:null,template:null,jsTemplates:[],btnAction:null,btnType:null,limit:1,replacement:[]},i={enableAjaxValidation:!1,validateOnBlur:!1,validateOnChange:!1,validateOnType:!1},n={init:function(l){var a=t.extend(!0,{},e,l||{}),u=t("#"+a.id),r=u.closest("form"),p=this.selector.replace("#","");u.data("multipleInput",{settings:a,currentIndex:0,attributeDefaults:{}}),t(document).on("click.multipleInput","#"+a.id+" .js-input-remove",function(t){t.preventDefault(),n.removeInput.apply(this)}),t(document).on("click.multipleInput","#"+a.id+" .js-input-plus",function(t){t.preventDefault(),n.addInput.apply(this)});var o=setInterval(function(){if("object"==typeof r.data("yiiActiveForm")){var e=r.yiiActiveForm("find",p),l=[];"object"==typeof e&&(t.each(e,function(t,e){-1==["id","input","container"].indexOf(t)&&(l[t]=e)}),r.yiiActiveForm("remove",p));var d=t.extend({},i,a.attributeOptions);t.each(d,function(t,e){"undefined"==typeof l[t]&&(l[t]=e)}),u.data("multipleInput").attributeDefaults=l,u.find(".multiple-input-list").find("input, select, textarea").each(function(){n.addAttribute.apply(this)}),u.data("multipleInput").currentIndex=u.find(".multiple-input-list__item").length,t("[data-selected-option]").each(function(e,i){var n=t(i);n.val(n.data("selected-option")).removeAttr("data-selected-option")}),clearInterval(o)}},100);u.trigger("init")},addInput:function(){var e=t(this).closest(".multiple-input").first(),i=e.data("multipleInput"),l=i.settings,a=l.template,u=e.find(".multiple-input-list").first(),r=e.find(".multiple-input-list__item").length,p=l.replacement||[];if(!(null!=l.limit&&r>=l.limit)){var o=["{multiple-index}","{multiple-btn-action}","{multiple-btn-type}","{multiple-value}"],d=[i.currentIndex,l.btnAction,l.btnType,""];for(var c in o)a=a.replaceAll(o[c],d[c]);for(var s in p)a=a.replaceAll("{"+s+"}",p[s]);t(a).hide().appendTo(u).fadeIn(300),t(a).find("input, select, textarea").each(function(){n.addAttribute.apply(this)});var m;for(c in l.jsTemplates)m=l.jsTemplates[c].replaceAll("{multiple-index}",i.currentIndex),window.eval(m);e.data("multipleInput").currentIndex++,e.trigger("addNewRow")}},removeInput:function(){var e=t(this).closest(".multiple-input").first(),i=t(this).closest(".multiple-input-list__item");i.find("input, select, textarea").each(function(){n.removeAttribute.apply(this)}),i.fadeOut(300,function(){t(this).remove()}),e.trigger("removeRow")},addAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")),n=i.closest(".multiple-input").first(),l=i.closest("form");if(0!=n.length){var a=n.data("multipleInput");l.yiiActiveForm("add",t.extend({},a.attributeDefaults,{id:e,input:"#"+e,container:".field-"+e}))}},removeAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")).closest("form");i.yiiActiveForm("remove",e)}};String.prototype.replaceAll=function(t,e){return this.split(t).join(e)}}(window.jQuery);