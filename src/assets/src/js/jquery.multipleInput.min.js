!function(t){t.fn.multipleInput=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.multipleInput"),!1):n.init.apply(this,arguments)};var e={id:null,template:null,jsTemplates:[],btnAction:null,btnType:null,limit:1,replacement:[]},i={enableAjaxValidation:!1,validateOnBlur:!1,validateOnChange:!1,validateOnType:!1},n={init:function(l){var u=t.extend(!0,{},e,l||{}),a=t("#"+u.id),r=a.closest("form"),p=this.selector.replace("#","");a.data("multipleInput",{settings:u,currentIndex:0,attributeDefaults:{}}),t(document).on("click.multipleInput","#"+u.id+" .js-input-remove",function(t){t.preventDefault(),n.removeInput.apply(this)}),t(document).on("click.multipleInput","#"+u.id+" .js-input-plus",function(t){t.preventDefault(),n.addInput.apply(this)});var o=setInterval(function(){if("object"==typeof r.data("yiiActiveForm")){var e=r.yiiActiveForm("find",p),l=[];"object"==typeof e&&(t.each(e,function(t,e){-1==["id","input","container"].indexOf(t)&&(l[t]=e)}),r.yiiActiveForm("remove",p));var s=t.extend({},i,u.attributeOptions);t.each(s,function(t,e){"undefined"==typeof l[t]&&(l[t]=e)}),a.data("multipleInput").attributeDefaults=l,a.find(".multiple-input-list").find("input, select, textarea").each(function(){n.addAttribute.apply(this)}),a.data("multipleInput").currentIndex=a.find(".multiple-input-list__item").length,clearInterval(o)}},100);a.trigger("init")},addInput:function(){var e=t(this).closest(".multiple-input").first(),i=e.data("multipleInput"),l=i.settings,u=l.template,a=e.find(".multiple-input-list").first(),r=e.find(".multiple-input-list__item").length,p=l.replacement||[];if(!(null!=l.limit&&r>=l.limit)){var o=["{multiple-index}","{multiple-btn-action}","{multiple-btn-type}","{multiple-value}"],s=[i.currentIndex,l.btnAction,l.btnType,""];for(var c in o)u=u.replaceAll(o[c],s[c]);for(var d in p)u=u.replaceAll("{"+d+"}",p[d]);t(u).hide().appendTo(a).fadeIn(300),t(u).find("input, select, textarea").each(function(){n.addAttribute.apply(this)});var m;for(c in l.jsTemplates)m=l.jsTemplates[c].replaceAll("{multiple-index}",i.currentIndex),window.eval(m);e.data("multipleInput").currentIndex++,e.trigger("addNewRow")}},removeInput:function(){var e=t(this).closest(".multiple-input").first(),i=t(this).closest(".multiple-input-list__item");i.find("input, select, textarea").each(function(){n.removeAttribute.apply(this)}),i.fadeOut(300,function(){t(this).remove()}),e.trigger("removeRow")},addAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")),n=i.closest(".multiple-input").first(),l=i.closest("form");if(0!=n.length){var u=n.data("multipleInput");l.yiiActiveForm("add",t.extend({},u.attributeDefaults,{id:e,input:"#"+e,container:".field-"+e}))}},removeAttribute:function(){var e=t(this).attr("id"),i=t("#"+t(this).attr("id")).closest("form");0!==i.length&&i.yiiActiveForm("remove",e)}};String.prototype.replaceAll=function(t,e){return this.split(t).join(e)}}(window.jQuery);